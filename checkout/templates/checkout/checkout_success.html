{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">

{% endblock %}

{% block content %}

<div class="container bas-con">
    <div class="row">
        <div class="col-12 col-md-6 col-lg-4 offset-lg-4 pt-3 ">
            <h3 class="text-uppercase mb-4 p-2 sub-head bg-success">Order Complete
                <i class="fas fa-check fa-lg"></i>
            </h3>
            <p>You will find your order information below. 
                A confirmation email will be to <strong>{{ order.email }}</strong></p>
        </div>
    </div>

    <!--Order Info-->
    <div class="row">
       <div class="class col-12 col-lg-7">
           <div class= "order-confirmation-wrapper p2 sub-head ">
               <div class="row">
                   <small class="text-white">Order Info:</small>
               </div>
           </div>

           <div class="row">
               <div class ="col-12 col-md-4">
                    <h4 class="text-uppercase mt-2 mb-4 p-2 sub-head bg-info">Order Number</h4>
               </div>
                <div class ="col-12 col-md-8">
                    <p class=" small mb-4 p-2 ">{{ order.order_number }}</p>
               </div>
           </div> 

            <div class="row">
               <div class ="col-12 col-md-4 order">
                    <p class="mb-0">Order Date:</p>
               </div>
               <div class ="col-12 col-md-8 text-md-right">
                    <p class="mb-1">{{ order.date }}</p>
               </div>
           </div>

            <!--Order Details-->
             <div class= "order-confirmation-wrapper p2 sub-head">
               <div class="row">
                   <small class="text-white">Order Details:</small>
               </div>
           </div>
           {% for item in order.lineitems.all %}
            <div class="row">
               <div class ="col-12 col-md-4">
                    <p class="mb-0 text-black order">{{ item.product.name }}{% if item.product_size %} - Size {{ item.product.size|upper }}{% endif %}</p>
               </div>
               <div class ="col-12 col-md-8 text-md-right">
                    <p class="mb-1">{{ item.quantity }} @ Â£{{ item.product.price }}</p>
               </div>
           </div>
           {% endfor %}

           <!--Delivery Details-->
             <div class= "order-confirmation-wrapper p2 sub-head">
               <div class="row">
                   <small class="text-white">Delivery Details:</small>
               </div>
           </div>

           <div class="row">
                <div class="col-12 col-md-4">
                    <p class="mb-0 text-black order">Full Name:</p>
                </div>
                 <div class="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.full_name }}</p>
                </div>
            </div>

             <div class="row">
                <div class="col-12 col-md-4">
                    <p class="mb-0 text-black order">Address 1:</p>
                </div>
                 <div class="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.street_address1 }}</p>
                </div>
            </div>
            {% if order.street_address2 %}
            <div class="row">
                <div class="col-12 col-md-4">
                    <p class="mb-0 text-black order">Address 2:</p>
                </div>
                 <div class="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.street_address1 }}</p>
                </div>
            </div>
            {% endif %}

            {% if order.county %}
           <div class="row">
                <div class="col-12 col-md-4">
                    <p class="mb-0 text-black order">County:</p>
                </div>
                 <div class="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.county}}</p>
                </div>
            </div>
            {% endif %}

              <div class="row">
                <div class="col-12 col-md-4">
                    <p class="mb-0 text-black order">Town or City:</p>
                </div>
                 <div class="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.town_or_city}}</p>
                </div>
            </div>

            {% if order.postcode %}
            <div class="row">
               <div class ="col-12 col-md-4">
                    <p class="mb-0 text-black order">Postal Code:</p>
               </div>
               <div class ="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.postcode }}</p>
               </div>
           </div>
           {% endif %}

              <div class="row">
               <div class ="col-12 col-md-4">
                    <p class="mb-0 text-black order">Country:</p>
               </div>
               <div class ="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.country }}</p>
               </div>
           </div>

           <div class="row">
               <div class ="col-12 col-md-4">
                    <p class="mb-0 text-black order">Phone Number:</p>
               </div>
               <div class ="col-12 col-md-8 text-md-right">
                    <p class="mb-1">{{ order.phone_number }}</p>
               </div>
           </div>

           <!--Billing-->
             <div class= "order-confirmation-wrapper p2 sub-head">
               <div class="row">
                   <small class="text-white">Billing Info:</small>
               </div>
           </div>

            <div class="row">
               <div class ="col-12 col-md-4">
                    <p class="mb-0 text-black order">Order Total:</p>
               </div>
               <div class ="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.order_total }}</p>
               </div>
           </div>

          <div class="row">
               <div class ="col-12 col-md-4">
                    <p class="mb-0 text-black order">Delivery:</p>
               </div>
               <div class ="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.delivery_cost }}</p>
               </div>
           </div>

             <div class="row">
               <div class ="col-12 col-md-4">
                    <p class="mb-0 text-black order">Grand Total:</p>
               </div>
               <div class ="col-12 col-md-8 text-md-right">
                    <p class="mb-0">{{ order.grand_total }}</p>
               </div>
           </div>


       </div>
    </div>
</div>

{% endblock %} 

{% block postloadjs %}
    {{ block.super }}
    {{ stripe_public_key|json_script:"id_stripe_public_key" }}
    {{ client_secret|json_script:"id_client_secret" }}
    <script src="{% static 'checkout/js/stripe_elements.js' %}"></script>
{% endblock %}



